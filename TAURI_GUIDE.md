# Tauri æ¡Œé¢åº”ç”¨ä½¿ç”¨æŒ‡å—

## ç®€ä»‹

Claude Monitor ç°å·²æä¾› Tauri æ¡Œé¢åº”ç”¨ç‰ˆæœ¬ï¼Œæä¾›å›¾å½¢åŒ–é…ç½®ç•Œé¢ï¼Œè®©é…ç½®æ›´åŠ ç®€å•ç›´è§‚ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“ **å›¾å½¢åŒ–é…ç½®**ï¼šæ— éœ€æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å‹å¥½çš„ç•Œé¢å®Œæˆæ‰€æœ‰é…ç½®
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šé…ç½®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°ï¼Œé‡å¯åº”ç”¨åè‡ªåŠ¨åŠ è½½
- ğŸ§ª **è¿æ¥æµ‹è¯•**ï¼šå†…ç½® Webhook æµ‹è¯•åŠŸèƒ½ï¼Œä¸€é”®éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
- ğŸ¨ **ç°ä»£ç•Œé¢**ï¼šä½¿ç”¨ Ant Design æ„å»ºçš„ç°ä»£åŒ– UI

## å®‰è£…å’Œè¿è¡Œ

### å¼€å‘æ¨¡å¼

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬
./start-dev.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
cd ui && npm install && cd ..
cargo tauri dev
```

å¼€å‘æ¨¡å¼ä¼šè‡ªåŠ¨ï¼š
1. å®‰è£…å‰ç«¯ä¾èµ–
2. å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
3. å¯åŠ¨ Tauri åº”ç”¨

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨æ„å»ºè„šæœ¬
./build.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ„å»º
cd ui && npm run build && cd ..
cargo tauri build
```

æ„å»ºå®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äºï¼š
- **macOS**: `src-tauri/target/release/bundle/macos/Claude Monitor.app`
- **Windows**: `src-tauri/target/release/bundle/msi/`
- **Linux**: `src-tauri/target/release/bundle/deb/`

## ä½¿ç”¨æ­¥éª¤

### 1. é…ç½®é£ä¹¦æœºå™¨äºº

1. åœ¨é£ä¹¦ç¾¤èŠä¸­æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº
2. è·å– Webhook URLï¼ˆæ ¼å¼ï¼š`https://open.feishu.cn/open-apis/bot/v2/hook/...`ï¼‰
3. åœ¨åº”ç”¨ç•Œé¢ä¸­ç²˜è´´ Webhook URL

### 2. æµ‹è¯•è¿æ¥

ç‚¹å‡»"æµ‹è¯• Webhook è¿æ¥"æŒ‰é’®ï¼Œåº”ç”¨ä¼šå‘é€ä¸€æ¡æµ‹è¯•æ¶ˆæ¯åˆ°é£ä¹¦ï¼š
```
ğŸ§ª æµ‹è¯•æ¶ˆæ¯ï¼šClaude Monitor è¿æ¥æˆåŠŸï¼
```

å¦‚æœåœ¨é£ä¹¦ä¸­çœ‹åˆ°è¿™æ¡æ¶ˆæ¯ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

### 3. ä¿å­˜é…ç½®

ç‚¹å‡»"ä¿å­˜é…ç½®"æŒ‰é’®ï¼Œé…ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°ï¼š
- **macOS**: `~/Library/Application Support/com.claude.monitor/config.json`
- **Windows**: `%APPDATA%\com.claude.monitor\config.json`
- **Linux**: `~/.config/com.claude.monitor/config.json`

### 4. é…ç½®æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ç‹¬ç«‹è¿è¡Œ HTTP æœåŠ¡å™¨æ¥æ”¶é£ä¹¦å›è°ƒï¼š
- æœåŠ¡å™¨åœ°å€ï¼šé»˜è®¤ `0.0.0.0`
- æœåŠ¡å™¨ç«¯å£ï¼šé»˜è®¤ `3000`
- è‡ªåŠ¨å¯åŠ¨ï¼šå¼€å¯ååº”ç”¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨

### 5. é…ç½® Claude Code Hooks

å‚è€ƒ `.claude/settings.local.json.example` æ–‡ä»¶ï¼Œå°† hook å‘½ä»¤æŒ‡å‘ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

## é…ç½®æ–‡ä»¶æ ¼å¼

é…ç½®ä¿å­˜ä¸º JSON æ ¼å¼ï¼š

```json
{
  "feishu_webhook_url": "https://open.feishu.cn/open-apis/bot/v2/hook/...",
  "server_host": "0.0.0.0",
  "server_port": 3000,
  "auto_start": false
}
```

## å·¥ä½œåŸç†

1. **é…ç½®ç®¡ç†**
   - Tauri åç«¯æä¾› `get_config` å’Œ `save_config` å‘½ä»¤
   - é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨åº”ç”¨æ•°æ®ç›®å½•
   - å‰ç«¯é€šè¿‡ Tauri API è°ƒç”¨åç«¯å‘½ä»¤

2. **Webhook æµ‹è¯•**
   - ç‚¹å‡»æµ‹è¯•æŒ‰é’®æ—¶ï¼Œå‘é€æµ‹è¯•æ¶ˆæ¯åˆ°é£ä¹¦
   - ä½¿ç”¨ reqwest åº“å‘é€ HTTP è¯·æ±‚
   - è¿”å›æµ‹è¯•ç»“æœç»™å‰ç«¯æ˜¾ç¤º

3. **ä¸ Claude Code é›†æˆ**
   - CLI ç‰ˆæœ¬çš„ hook åŠŸèƒ½ä¿æŒä¸å˜
   - æ¡Œé¢åº”ç”¨ä¸»è¦ç”¨äºé…ç½®ç®¡ç†
   - ä¸¤è€…å…±äº«ç›¸åŒçš„é…ç½®æ ¼å¼

## æ•…éšœæ’æŸ¥

### åº”ç”¨æ— æ³•å¯åŠ¨

- æ£€æŸ¥æ˜¯å¦å®‰è£…äº†æ‰€æœ‰ä¾èµ–
- æŸ¥çœ‹ç»ˆç«¯é”™è¯¯ä¿¡æ¯
- ç¡®è®¤ Node.js å’Œ Rust ç‰ˆæœ¬æ»¡è¶³è¦æ±‚

### é…ç½®ä¿å­˜å¤±è´¥

- æ£€æŸ¥åº”ç”¨æ˜¯å¦æœ‰å†™å…¥æƒé™
- æŸ¥çœ‹åº”ç”¨æ—¥å¿—
- ç¡®è®¤ç£ç›˜ç©ºé—´å……è¶³

### Webhook æµ‹è¯•å¤±è´¥

- æ£€æŸ¥ URL æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
- éªŒè¯é£ä¹¦æœºå™¨äººæœªè¢«ç¦ç”¨

## å¼€å‘è€…ä¿¡æ¯

### æŠ€æœ¯æ ˆ

- **åç«¯**: Rust + Tauri 2.0
- **å‰ç«¯**: React 19 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 6
- **UI åº“**: Ant Design 5
- **API**: Tauri API

### ç›®å½•ç»“æ„

```
src-tauri/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ lib.rs           # Tauri å‘½ä»¤å®ç°
â”œâ”€â”€ Cargo.toml           # Rust ä¾èµ–
â””â”€â”€ tauri.conf.json      # Tauri é…ç½®

ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx          # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ App.css          # æ ·å¼
â”‚   â”œâ”€â”€ main.tsx         # å…¥å£
â”‚   â””â”€â”€ index.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ package.json         # NPM ä¾èµ–
â””â”€â”€ vite.config.ts       # Vite é…ç½®
```

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src-tauri/src/lib.rs` ä¸­æ·»åŠ  Tauri å‘½ä»¤
2. ä½¿ç”¨ `#[tauri::command]` å®æ ‡è®°å‡½æ•°
3. åœ¨ `invoke_handler` ä¸­æ³¨å†Œå‘½ä»¤
4. åœ¨å‰ç«¯ä½¿ç”¨ `invoke()` è°ƒç”¨

ç¤ºä¾‹ï¼š

```rust
// åç«¯
#[tauri::command]
fn my_command(param: String) -> Result<String, String> {
    Ok(format!("Received: {}", param))
}

// æ³¨å†Œ
.invoke_handler(tauri::generate_handler![my_command])
```

```typescript
// å‰ç«¯
const result = await invoke('my_command', { param: 'test' });
```

## æ›´å¤šèµ„æº

- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [Ant Design æ–‡æ¡£](https://ant.design/)
- [React æ–‡æ¡£](https://react.dev/)
